{% extends 'demo/base.html' %}
{% load static %}

{% block title %}ç”¨æˆ·ç™»å½•{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/login.css' %}"/>
{% endblock %}

{% block content %}
<section class="auth-wrapper auth-wrapper--login">
    <div class="auth-grid">
        <div class="auth-card" id="loginFormContainer">
        <div class="auth-card__header">
            <h2>æ¬¢è¿å›æ¥</h2>
            <p>ç™»å½•æ‚¨çš„ Django Hub è´¦æˆ·</p>
        </div>

        <div class="auth-card__highlight" aria-live="polite">
            <div class="auth-card__highlight-title">
                <i class="material-icons">lock</i>
                <span>æ¼”ç¤ºè´¦æˆ·</span>
            </div>
            <dl class="auth-card__highlight-meta">
                <div>
                    <dt>ç”¨æˆ·å</dt>
                    <dd>admin</dd>
                </div>
                <div>
                    <dt>å¯†ç </dt>
                    <dd>admin</dd>
                </div>
            </dl>
            <button type="button" class="auth-helper__button" id="fillDemoBtn">ä¸€é”®å¡«å……æ¼”ç¤ºè´¦æˆ·</button>
        </div>

        {% if messages %}
        <div class="auth-alert auth-alert--error" role="alert">
            <i class="material-icons" aria-hidden="true">error_outline</i>
            <div>
                {% for message in messages %}
                    <p>{{ message }}</p>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        <form method="post" action="{% url 'demo:login' %}" id="loginForm" class="auth-form">
            {% csrf_token %}

            <div class="form-field">
                <input type="text" id="username" name="username" placeholder=" " required autocomplete="username">
                <label for="username">ç”¨æˆ·å</label>
                <small class="form-tip">è¯·è¾“å…¥ç™»å½•è´¦å·</small>
            </div>

            <div class="form-field">
                <input type="password" id="password" name="password" placeholder=" " required autocomplete="current-password">
                <label for="password">å¯†ç </label>
                <small class="form-tip">å¯†ç åŒºåˆ†å¤§å°å†™</small>
            </div>

            <div class="form-extras">
                <label class="form-checkbox">
                    <input type="checkbox" id="rememberMe" name="remember_me">
                    <span class="form-checkbox__decor" aria-hidden="true">
                        <i class="material-icons">check</i>
                    </span>
                    <span class="form-checkbox__label">è®°ä½æˆ‘</span>
                </label>
                <a class="form-link" href="mailto:admin@example.com">å¿˜è®°å¯†ç ï¼Ÿ</a>
            </div>

            <button class="form-button" type="submit" id="loginSubmit">
                <span class="form-button__label">ç«‹å³ç™»å½•</span>
                <i class="material-icons" aria-hidden="true">arrow_forward</i>
            </button>
        </form>

        <div class="auth-footer">
            <span>è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ</span>
            <a href="{% url 'demo:register' %}">ç«‹å³æ³¨å†Œ</a>
        </div>
        </div>

        <div class="auth-hero">
            <div class="auth-hero__card">
                <div class="auth-hero__badge">ğŸ¯ Django Hub</div>
                <h1 class="auth-hero__title">é›†ä¸­åŒ–çš„å›¢é˜Ÿæƒé™ç®¡æ§ä¸­æ¢</h1>
                <p class="auth-hero__subtitle">ç°ä»£åŒ–çš„ç”¨æˆ·æƒé™ç®¡ç†ç³»ç»Ÿï¼Œä¸ºå›¢é˜Ÿæä¾›å®‰å…¨ã€é«˜æ•ˆçš„åä½œç¯å¢ƒã€‚</p>
                <ul class="auth-hero__list">
                    <li><i class="material-icons">dashboard</i><span>æ™ºèƒ½ä»ªè¡¨æ¿ - å®æ—¶ç›‘æ§ç³»ç»ŸçŠ¶æ€</span></li>
                    <li><i class="material-icons">group</i><span>ç”¨æˆ·ç®¡ç† - æ‰¹é‡æ“ä½œä¸è§’è‰²åˆ†é…</span></li>
                    <li><i class="material-icons">security</i><span>å®‰å…¨é˜²æŠ¤ - ä¼ä¸šçº§æ•°æ®åŠ å¯†</span></li>
                </ul>
                <div class="auth-hero__footer">
                    <p> crafted with â¤ï¸ by <strong>KTO</strong></p>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
(function () {
    const form = document.getElementById('loginForm');
    const submitBtn = document.getElementById('loginSubmit');
    const usernameInput = document.getElementById('username');
    const passwordInput = document.getElementById('password');
    const demoBtn = document.getElementById('fillDemoBtn');

    if (form && submitBtn) {
        form.addEventListener('submit', function () {
            submitBtn.classList.add('is-loading');
            submitBtn.setAttribute('aria-busy', 'true');
            submitBtn.querySelector('.form-button__label').textContent = 'ç™»å½•ä¸­â€¦';
        });
    }

    if (demoBtn && usernameInput && passwordInput) {
        demoBtn.addEventListener('click', function () {
            usernameInput.value = 'admin';
            passwordInput.value = 'admin';
            usernameInput.dispatchEvent(new Event('input'));
            passwordInput.dispatchEvent(new Event('input'));
            usernameInput.focus();
        });
    }
})();
</script>
{% endblock %}
